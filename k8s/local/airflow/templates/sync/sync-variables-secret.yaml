---
# Source: airflow/templates/sync/sync-variables-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: airflow-sync-variables
  labels:
    app: airflow
    component: sync-variables
    chart: airflow-8.7.1
    release: airflow
    heritage: Helm
data:
  sync_variables.py: "CiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIyBCRUdJTjogR0xPQkFMIENPREUgIyMjIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIEdsb2JhbCBJbXBvcnRzICMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjCmltcG9ydCBsb2dnaW5nCmltcG9ydCBvcwppbXBvcnQgdGltZQpmcm9tIHN0cmluZyBpbXBvcnQgVGVtcGxhdGUKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QsIERpY3QsIE9wdGlvbmFsCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMgR2xvYmFsIENvbmZpZ3MgIyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyB0aGUgcGF0aCB3aGljaCBTZWNyZXQvQ29uZmlnTWFwIGFyZSBtb3VudGVkIHRvCkNPTkZfX1RFTVBMQVRFU19QQVRIID0gIi9tbnQvdGVtcGxhdGVzIgoKIyBob3cgZnJlcXVlbnRseSB0byBjaGVjayBmb3IgU2VjcmV0L0NvbmZpZ01hcCB1cGRhdGVzCkNPTkZfX1RFTVBMQVRFU19TWU5DX0lOVEVSVkFMID0gMTAKCiMgaG93IGZyZXF1ZW50bHkgdG8gcmUtc3luYyBvYmplY3RzIChDb25uZWN0aW9ucywgUG9vbHMsIFVzZXJzLCBWYXJpYWJsZXMpCkNPTkZfX09CSkVDVFNfU1lOQ19JTlRFUlZBTCA9IDYwCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyBHbG9iYWwgRnVuY3Rpb25zICMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKZGVmIHN0cmluZ19zdWJzdGl0dXRpb24ocmF3X3N0cmluZzogT3B0aW9uYWxbc3RyXSwgc3Vic3RpdHV0aW9uX21hcDogRGljdFtzdHIsIHN0cl0pIC0+IHN0cjoKICAgICIiIgogICAgQXBwbHkgYmFzaC1saWtlIHN1YnN0aXR1dGlvbnMgdG8gYSByYXcgc3RyaW5nLgoKICAgIEV4YW1wbGU6CiAgICAtIHN0cmluZ19zdWJzdGl0dXRpb24oIkhlbGxvISIsIE5vbmUpIC0+ICJIZWxsbyEiCiAgICAtIHN0cmluZ19zdWJzdGl0dXRpb24oIkhlbGxvICR7TkFNRX0hIiwgeyJOQU1FIjogIkFpcmZsb3cifSkgLT4gIkhlbGxvIEFpcmZsb3chIgogICAgIiIiCiAgICBpZiByYXdfc3RyaW5nIGFuZCBsZW4oc3Vic3RpdHV0aW9uX21hcCkgPiAwOgogICAgICAgIHRwbCA9IFRlbXBsYXRlKHJhd19zdHJpbmcpCiAgICAgICAgcmV0dXJuIHRwbC5zYWZlX3N1YnN0aXR1dGUoc3Vic3RpdHV0aW9uX21hcCkKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIHJhd19zdHJpbmcKCgpkZWYgdGVtcGxhdGVfbXRpbWUodGVtcGxhdGVfbmFtZTogc3RyKSAtPiBmbG9hdDoKICAgICIiIgogICAgUmV0dXJuIHRoZSBtb2RpZmljYXRpb24tdGltZSBvZiB0aGUgZmlsZSBzdG9yaW5nIGB0ZW1wbGF0ZV9uYW1lYAogICAgIiIiCiAgICBmaWxlX3BhdGggPSBmIntDT05GX19URU1QTEFURVNfUEFUSH0ve3RlbXBsYXRlX25hbWV9IgogICAgcmV0dXJuIG9zLnN0YXQoZmlsZV9wYXRoKS5zdF9tdGltZQoKCmRlZiB0ZW1wbGF0ZV92YWx1ZSh0ZW1wbGF0ZV9uYW1lOiBzdHIpIC0+IHN0cjoKICAgICIiIgogICAgUmV0dXJuIHRoZSBjb250ZW50cyBvZiB0aGUgZmlsZSBzdG9yaW5nIGB0ZW1wbGF0ZV9uYW1lYAogICAgIiIiCiAgICBmaWxlX3BhdGggPSBmIntDT05GX19URU1QTEFURVNfUEFUSH0ve3RlbXBsYXRlX25hbWV9IgogICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgInIiKSBhcyBmOgogICAgICAgIHJldHVybiBmLnJlYWQoKQoKCmRlZiByZWZyZXNoX3RlbXBsYXRlX2NhY2hlKHRlbXBsYXRlX25hbWVzOiBMaXN0W3N0cl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlX210aW1lX2NhY2hlOiBEaWN0W3N0ciwgZmxvYXRdLAogICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZV92YWx1ZV9jYWNoZTogRGljdFtzdHIsIHN0cl0pIC0+IExpc3Rbc3RyXToKICAgICIiIgogICAgUmVmcmVzaCB0aGUgcHJvdmlkZWQgZGljdGlvbmFyeSBjYWNoZXMgb2YgdGVtcGxhdGUgdmFsdWVzICYgbXRpbWVzLgoKICAgIDpwYXJhbSB0ZW1wbGF0ZV9uYW1lczogdGhlIG5hbWVzIG9mIGFsbCB0ZW1wbGF0ZXMgdG8gcmVmcmVzaAogICAgOnBhcmFtIHRlbXBsYXRlX210aW1lX2NhY2hlOiB0aGUgZGljdGlvbmFyeSBjYWNoZSBvZiB0ZW1wbGF0ZSBmaWxlIG1vZGlmaWNhdGlvbi10aW1lcwogICAgOnBhcmFtIHRlbXBsYXRlX3ZhbHVlX2NhY2hlOiB0aGUgZGljdGlvbmFyeSBjYWNoZSBvZiB0ZW1wbGF0ZSB2YWx1ZXMKICAgIDpyZXR1cm46IHRoZSBuYW1lcyBvZiB0ZW1wbGF0ZXMgd2hpY2ggY2hhbmdlZAogICAgIiIiCiAgICBjaGFuZ2VkX3RlbXBsYXRlcyA9IFtdCiAgICBmb3IgdGVtcGxhdGVfbmFtZSBpbiB0ZW1wbGF0ZV9uYW1lczoKICAgICAgICBvbGRfbXRpbWUgPSB0ZW1wbGF0ZV9tdGltZV9jYWNoZS5nZXQodGVtcGxhdGVfbmFtZSwgTm9uZSkKICAgICAgICBuZXdfbXRpbWUgPSB0ZW1wbGF0ZV9tdGltZSh0ZW1wbGF0ZV9uYW1lKQogICAgICAgICMgZmlyc3QsIGNoZWNrIGlmIHRoZSBmaWxlcyB3ZXJlIG1vZGlmaWVkCiAgICAgICAgaWYgb2xkX210aW1lICE9IG5ld19tdGltZToKICAgICAgICAgICAgb2xkX3ZhbHVlID0gdGVtcGxhdGVfdmFsdWVfY2FjaGUuZ2V0KHRlbXBsYXRlX25hbWUsIE5vbmUpCiAgICAgICAgICAgIG5ld192YWx1ZSA9IHRlbXBsYXRlX3ZhbHVlKHRlbXBsYXRlX25hbWUpCiAgICAgICAgICAgICMgc2Vjb25kLCBjaGVjayBpZiB0aGUgdmFsdWUgYWN0dWFsbHkgY2hhbmdlZAogICAgICAgICAgICBpZiBvbGRfdmFsdWUgIT0gbmV3X3ZhbHVlOgogICAgICAgICAgICAgICAgdGVtcGxhdGVfdmFsdWVfY2FjaGVbdGVtcGxhdGVfbmFtZV0gPSBuZXdfdmFsdWUKICAgICAgICAgICAgICAgIGNoYW5nZWRfdGVtcGxhdGVzICs9IFt0ZW1wbGF0ZV9uYW1lXQogICAgICAgICAgICB0ZW1wbGF0ZV9tdGltZV9jYWNoZVt0ZW1wbGF0ZV9uYW1lXSA9IG5ld19tdGltZQogICAgcmV0dXJuIGNoYW5nZWRfdGVtcGxhdGVzCgoKZGVmIG1haW4oc3luY19mb3JldmVyOiBib29sKToKICAgICMgaW5pdGlhbCBzeW5jIG9mIHRlbXBsYXRlIGNhY2hlCiAgICByZWZyZXNoX3RlbXBsYXRlX2NhY2hlKAogICAgICAgIHRlbXBsYXRlX25hbWVzPVZBUl9fVEVNUExBVEVfTkFNRVMsCiAgICAgICAgdGVtcGxhdGVfbXRpbWVfY2FjaGU9VkFSX19URU1QTEFURV9NVElNRV9DQUNIRSwKICAgICAgICB0ZW1wbGF0ZV92YWx1ZV9jYWNoZT1WQVJfX1RFTVBMQVRFX1ZBTFVFX0NBQ0hFCiAgICApCgogICAgIyBpbml0aWFsIHN5bmMgb2Ygb2JqZWN0cyBpbnRvIEFpcmZsb3cgREIKICAgIHN5bmNfd2l0aF9haXJmbG93KCkKCiAgICBpZiBzeW5jX2ZvcmV2ZXI6CiAgICAgICAgIyBkZWZpbmUgdmFyaWFibGVzIHVzZWQgdG8gdHJhY2sgaG93IGxvbmcgc2luY2UgbGFzdCByZWZyZXNoL3N5bmMKICAgICAgICB0ZW1wbGF0ZXNfc3luY19lcG9jaCA9IHRpbWUudGltZSgpCiAgICAgICAgb2JqZWN0c19zeW5jX2Vwb2NoID0gdGltZS50aW1lKCkKCiAgICAgICAgIyBtYWluIGxvb3AKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAjIG1vbml0b3IgZm9yIHRlbXBsYXRlIHNlY3JldC9jb25maWdtYXAgdXBkYXRlcwogICAgICAgICAgICBpZiAodGltZS50aW1lKCkgLSB0ZW1wbGF0ZXNfc3luY19lcG9jaCkgPiBDT05GX19URU1QTEFURVNfU1lOQ19JTlRFUlZBTDoKICAgICAgICAgICAgICAgIGxvZ2dpbmcuZGVidWcoZiJ0ZW1wbGF0ZSBzeW5jIGludGVydmFsIHJlYWNoZWQsIHJlLXN5bmNpbmcgYWxsIHRlbXBsYXRlcy4uLiIpCiAgICAgICAgICAgICAgICBjaGFuZ2VkX3RlbXBsYXRlcyA9IHJlZnJlc2hfdGVtcGxhdGVfY2FjaGUoCiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVfbmFtZXM9VkFSX19URU1QTEFURV9OQU1FUywKICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZV9tdGltZV9jYWNoZT1WQVJfX1RFTVBMQVRFX01USU1FX0NBQ0hFLAogICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlX3ZhbHVlX2NhY2hlPVZBUl9fVEVNUExBVEVfVkFMVUVfQ0FDSEUKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHRlbXBsYXRlc19zeW5jX2Vwb2NoID0gdGltZS50aW1lKCkKICAgICAgICAgICAgICAgIGlmIGNoYW5nZWRfdGVtcGxhdGVzOgogICAgICAgICAgICAgICAgICAgIGxvZ2dpbmcuaW5mbyhmInRlbXBsYXRlIHZhbHVlcyBoYXZlIGNoYW5nZWQ6IFt7JywnLmpvaW4oY2hhbmdlZF90ZW1wbGF0ZXMpfV0iKQogICAgICAgICAgICAgICAgICAgIHN5bmNfd2l0aF9haXJmbG93KCkKICAgICAgICAgICAgICAgICAgICBvYmplY3RzX3N5bmNfZXBvY2ggPSB0aW1lLnRpbWUoKQoKICAgICAgICAgICAgIyBtb25pdG9yIGZvciBleHRlcm5hbCBjaGFuZ2VzIHRvIG9iamVjdHMgKGxpa2UgZnJvbSBVSSkKICAgICAgICAgICAgaWYgKHRpbWUudGltZSgpIC0gb2JqZWN0c19zeW5jX2Vwb2NoKSA+IENPTkZfX09CSkVDVFNfU1lOQ19JTlRFUlZBTDoKICAgICAgICAgICAgICAgIGxvZ2dpbmcuZGVidWcoZiJzeW5jIGludGVydmFsIHJlYWNoZWQsIHJlLXN5bmNpbmcgYWxsIG9iamVjdHMuLi4iKQogICAgICAgICAgICAgICAgc3luY193aXRoX2FpcmZsb3coKQogICAgICAgICAgICAgICAgb2JqZWN0c19zeW5jX2Vwb2NoID0gdGltZS50aW1lKCkKCiAgICAgICAgICAgICMgZW5zdXJlIHdlIGRvbnQgbG9vcCB0b28gZmFzdAogICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIyBFTkQ6IEdMT0JBTCBDT0RFICMjIyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiMjIyMjIyMjIyMjIyMKIyMgSW1wb3J0cyAjIwojIyMjIyMjIyMjIyMjCmZyb20gYWlyZmxvdy5tb2RlbHMgaW1wb3J0IFZhcmlhYmxlCmZyb20gYWlyZmxvdy51dGlscy5kYiBpbXBvcnQgY3JlYXRlX3Nlc3Npb24KCgojIyMjIyMjIyMjIyMjCiMjIENsYXNzZXMgIyMKIyMjIyMjIyMjIyMjIwpjbGFzcyBWYXJpYWJsZVdyYXBwZXIob2JqZWN0KToKICAgIGRlZiBfX2luaXRfXygKICAgICAgICAgICAgc2VsZiwKICAgICAgICAgICAga2V5OiBzdHIsCiAgICAgICAgICAgIHZhbDogc3RyLAogICAgKToKICAgICAgICBzZWxmLmtleSA9IGtleQogICAgICAgIHNlbGYuX3ZhbCA9IHZhbAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHZhbChzZWxmKSAtPiBzdHI6CiAgICAgICAgcmV0dXJuIHN0cmluZ19zdWJzdGl0dXRpb24oc2VsZi5fdmFsLCBWQVJfX1RFTVBMQVRFX1ZBTFVFX0NBQ0hFKQoKICAgIGRlZiBhc192YXJpYWJsZShzZWxmKSAtPiBWYXJpYWJsZToKICAgICAgICByZXR1cm4gVmFyaWFibGUoCiAgICAgICAgICAgIGtleT1zZWxmLmtleSwKICAgICAgICAgICAgdmFsPXNlbGYudmFsCiAgICAgICAgKQoKCiMjIyMjIyMjIyMjIyMjIwojIyBWYXJpYWJsZXMgIyMKIyMjIyMjIyMjIyMjIyMjClZBUl9fVEVNUExBVEVfTkFNRVMgPSBbCl0KVkFSX19URU1QTEFURV9NVElNRV9DQUNIRSA9IHt9ClZBUl9fVEVNUExBVEVfVkFMVUVfQ0FDSEUgPSB7fQpWQVJfX1ZBUklBQkxFX1dSQVBQRVJTID0gewogICJlbnZpcm9ubWVudCI6IFZhcmlhYmxlV3JhcHBlcigKICAgIGtleT0iZW52aXJvbm1lbnQiLAogICAgdmFsPSJwcm9kIiwKICApLAp9CgoKIyMjIyMjIyMjIyMjIyMjCiMjIEZ1bmN0aW9ucyAjIwojIyMjIyMjIyMjIyMjIyMKZGVmIGNvbXBhcmVfdmFyaWFibGVzKHYxOiBWYXJpYWJsZSwgdjI6IFZhcmlhYmxlKSAtPiBib29sOgogICAgIiIiCiAgICBDaGVjayBpZiB0d28gVmFyaWFibGUgb2JqZWN0cyBhcmUgaWRlbnRpY2FsLgogICAgIiIiCiAgICByZXR1cm4gdjEua2V5ID09IHYyLmtleSBhbmQgdjEudmFsID09IHYyLnZhbAoKCmRlZiBzeW5jX3ZhcmlhYmxlKHZhcmlhYmxlX3dyYXBwZXI6IFZhcmlhYmxlV3JhcHBlcikgLT4gTm9uZToKICAgICIiIgogICAgU3luYyB0aGUgVmFyaWFibGUgZGVmaW5lZCBieSBhIHByb3ZpZGVkIFZhcmlhYmxlV3JhcHBlciBpbnRvIHRoZSBhaXJmbG93IERCLgogICAgIiIiCiAgICB2X2tleSA9IHZhcmlhYmxlX3dyYXBwZXIua2V5CiAgICB2X25ldyA9IHZhcmlhYmxlX3dyYXBwZXIuYXNfdmFyaWFibGUoKQoKICAgIHZhcmlhYmxlX2FkZGVkID0gRmFsc2UKICAgIHZhcmlhYmxlX3VwZGF0ZWQgPSBGYWxzZQoKICAgIHdpdGggY3JlYXRlX3Nlc3Npb24oKSBhcyBzZXNzaW9uOgogICAgICAgIHZfb2xkID0gc2Vzc2lvbi5xdWVyeShWYXJpYWJsZSkuZmlsdGVyKFZhcmlhYmxlLmtleSA9PSB2X2tleSkuZmlyc3QoKQogICAgICAgIGlmIG5vdCB2X29sZDoKICAgICAgICAgICAgbG9nZ2luZy5pbmZvKGYiVmFyaWFibGU9YHt2X2tleX1gIGlzIG1pc3NpbmcsIGFkZGluZy4uLiIpCiAgICAgICAgICAgIHNlc3Npb24uYWRkKHZfbmV3KQogICAgICAgICAgICB2YXJpYWJsZV9hZGRlZCA9IFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBjb21wYXJlX3ZhcmlhYmxlcyh2X25ldywgdl9vbGQpOgogICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbG9nZ2luZy5pbmZvKGYiVmFyaWFibGU9YHt2X2tleX1gIGV4aXN0cyBidXQgaGFzIGNoYW5nZWQsIHVwZGF0aW5nLi4uIikKICAgICAgICAgICAgICAgIHZfb2xkLnZhbCA9IHZfbmV3LnZhbAogICAgICAgICAgICAgICAgdmFyaWFibGVfdXBkYXRlZCA9IFRydWUKCiAgICBpZiB2YXJpYWJsZV9hZGRlZDoKICAgICAgICBsb2dnaW5nLmluZm8oZiJWYXJpYWJsZT1ge3Zfa2V5fWAgd2FzIHN1Y2Nlc3NmdWxseSBhZGRlZC4iKQogICAgaWYgdmFyaWFibGVfdXBkYXRlZDoKICAgICAgICBsb2dnaW5nLmluZm8oZiJWYXJpYWJsZT1ge3Zfa2V5fWAgd2FzIHN1Y2Nlc3NmdWxseSB1cGRhdGVkLiIpCgoKZGVmIHN5bmNfYWxsX3ZhcmlhYmxlcyh2YXJpYWJsZV93cmFwcGVyczogRGljdFtzdHIsIFZhcmlhYmxlV3JhcHBlcl0pIC0+IE5vbmU6CiAgICAiIiIKICAgIFN5bmMgYWxsIHZhcmlhYmxlcyBpbiBwcm92aWRlZCBgdmFyaWFibGVfd3JhcHBlcnNgLgogICAgIiIiCiAgICBsb2dnaW5nLmluZm8oIkJFR0lOOiBhaXJmbG93IHZhcmlhYmxlcyBzeW5jIikKICAgIGZvciB2YXJpYWJsZV93cmFwcGVyIGluIHZhcmlhYmxlX3dyYXBwZXJzLnZhbHVlcygpOgogICAgICAgIHN5bmNfdmFyaWFibGUodmFyaWFibGVfd3JhcHBlcikKICAgIGxvZ2dpbmcuaW5mbygiRU5EOiBhaXJmbG93IHZhcmlhYmxlcyBzeW5jIikKCgpkZWYgc3luY193aXRoX2FpcmZsb3coKSAtPiBOb25lOgogICAgIiIiCiAgICBQcmVmb3JtIGEgc3luYyBvZiBhbGwgb2JqZWN0cyB3aXRoIGFpcmZsb3cgKG5vdGUsIGBzeW5jX3dpdGhfYWlyZmxvdygpYCBpcyBjYWxsZWQgaW4gYG1haW4oKWAgdGVtcGxhdGUpLgogICAgIiIiCiAgICBzeW5jX2FsbF92YXJpYWJsZXModmFyaWFibGVfd3JhcHBlcnM9VkFSX19WQVJJQUJMRV9XUkFQUEVSUykKCgojIyMjIyMjIyMjIyMjIwojIyBSdW4gTWFpbiAjIwojIyMjIyMjIyMjIyMjIwptYWluKHN5bmNfZm9yZXZlcj1UcnVlKQ=="
